<% 
  let currentPage = locals.현재페이지 != undefined ? 현재페이지 : 1 
  let data = result;
  var totalRecord = data.length; //총 게시물 수 
  var pageSize = totalRecord > 5 ? 5 : data.length; //한 페이지당 보여질 게시물 수
  var totalPage = Math.ceil(totalRecord/pageSize); //총 페이지 수  글총개수 / 5 반올림
  var blockSize = 5; //블럭당 보여질 페이지네이션 수 
  var firstPage = currentPage - (currentPage-1)%blockSize; //블럭당 시작 페이지  무조건 1
  var lastPage = firstPage + (blockSize-1); //블럭당 끝 페이지 무조건 blocksize 
  var num = totalRecord - (currentPage-1)*pageSize; //페이지당 시작 번호 페이지번호말하는듯.
 %>
<!DOCTYPE html>
<html lang="kr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <%- include('nav.ejs') %>
  <ul>
    <% for(let i = 0; i < pageSize; i++){ %>
      <% if(num < 1) break %>
      <li>
        <span><%= num %></span>
          <h4><a href="/detail/<%= data[i]._id %>"><%= data[i].title %></a></h4>
          <p><%= data[i].content %></p>
          <a href="/edit/<%= data[i]._id %>">수정하기</a>
      </li>
      <% num = num -1 %>
    <% } %>
  </ul>
  <script>
    
  </script>
</body>
</html>